!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(((e="undefined"!=typeof globalThis?globalThis:e||self).mass=e.mass||{},e.mass.sdk={}))}(this,(function(e){"use strict";var r={ascii:function(){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},indices:function(){if(!this.cache){this.cache={};for(var e=r.ascii(),t=0;t<e.length;t++){var a=e[t];this.cache[a]=t}}return this.cache}};function t(e,r){if("object"==typeof r)for(var t in r)e[t]=r[t];return e}e.decode=function(e){var a=e.match(/mass:\/\/([0-9a-z-]+)\/([0-9a-z-]+)\?([0-9a-z-_.!~*'()%{}$=&:/]+)?/i);if(a){var i={provider:a[1],product:a[2]},n=a[3].split("&"),c=JSON.parse(function(e){for(var t=r.indices(),a=e.indexOf("="),i=a>-1,n=i?a:e.length,c=-1,o="";c<n;){var s=t[e[++c]]<<18|t[e[++c]]<<12|t[e[++c]]<<6|t[e[++c]];0!==s&&(o+=String.fromCharCode(s>>>16&255,s>>>8&255,255&s))}return i&&(o=o.slice(0,a-e.length)),o}(n[0].replace(/-/g,"+").replace(/_/g,"/")));t(i,c.mass),delete c.mass,i.params=c;for(var o=1;o<n.length;o++)if(n[o]){var s=n[o].split("=");if(s[1])try{s[1]=decodeURIComponent(s[1])}catch(e){}i.params[s[0]]=s[1]||""}return i}},e.encode=function(e,a,i,n){var c=/[^0-9a-z-]/gi;e=e.replace(c,""),a=a.replace(c,""),n=t({},n),i&&(n.mass={endpoint:i});var o=function(e){for(var t=r.ascii(),a=e.length-1,i=-1,n="";i<a;){var c=e.charCodeAt(++i)<<16|e.charCodeAt(++i)<<8|e.charCodeAt(++i);n+=t[c>>>18&63]+t[c>>>12&63]+t[c>>>6&63]+t[63&c]}var o=e.length%3;if(o>0)for(n=n.slice(0,o-3);n.length%4!=0;)n+="=";return n}(JSON.stringify(n));return"mass://"+e+"/"+a+"?"+(o=o.replace(/\+/g,"-").replace(/\//g,"_"))},Object.defineProperty(e,"__esModule",{value:!0})}));
